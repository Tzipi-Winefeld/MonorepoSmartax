<div>
  <h2>ניהול שעות עבודה</h2>

  <div>
    <p-button label="כניסה" icon="pi pi-sign-in" (click)="checkIn()"></p-button>
  </div>
  <div>
    <p-button label="יציאה" icon="pi pi-sign-out" (click)="checkOut()"></p-button>
  </div>
  <div>
    <h3>רשימת יומני עבודה</h3>
    <p-table [value]="workLogs">
      <ng-template pTemplate="header">
        <tr>
          <th>מספר עובד</th>
          <th>תאריך</th>
          <th>כניסה</th>
          <th>יציאה</th>
          <th>שעות עבודה</th>
          <th>פעולות</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-log>
        <tr>
          <td>{{ log.employeeId }}</td>
          <td>{{ log.date | date: 'dd/MM/yyyy' }}</td>
          <td>{{ log.checkIn | date: 'HH:mm' }}</td>
          <td>{{ log.checkOut ? (log.checkOut | date: 'HH:mm') : '---' }}</td>
          <td>{{ log.hoursWorked ? log.hoursWorked.toFixed(2) : '---' }}</td>
          <td>
            <p-button label="עריכה" icon="pi pi-pencil" (click)="editWorkLog(log)"></p-button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <div>
    <label>חודש</label>
    <input pInputText type="number" [(ngModel)]="exportMonth" placeholder="חודש">
    <label>שנה</label>
    <input pInputText type="number" [(ngModel)]="exportYear" placeholder="שנה">
    
    <p-button label="ייצא לאקסל" icon="pi pi-file-excel" (click)="exportWorkLogs(exportMonth, exportYear)"></p-button>
  </div>

  <!-- דיאלוג עריכת שעות עבודה -->
  <p-dialog header="עריכת שעות עבודה" [(visible)]="displayDialog" [modal]="true">
    <div>
      <label>כניסה</label>
      <p-calendar [(ngModel)]="editedCheckIn" [showTime]="true"></p-calendar>
    </div>
    <div>
      <label>יציאה</label>
      <p-calendar [(ngModel)]="editedCheckOut" [showTime]="true"></p-calendar>
    </div>
    <div>
      <p-button label="שמור" icon="pi pi-check" (click)="saveEditedWorkLog()"></p-button>
      <p-button label="בטל" icon="pi pi-times" (click)="cancelEdit()"></p-button>
    </div>
  </p-dialog>
</div>
